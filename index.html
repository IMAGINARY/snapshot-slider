<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Swiper demo</title>
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="node_modules/swiper/dist/css/swiper.min.css">
    <link rel="stylesheet" href="main.css">
    <script src="config.js"></script>

    <!-- load jQuery, Swiper and PdfViewer -->
    <script>
        window.$ = window.jQuery = require("jquery");
        require("swiper");
        window.PdfViewer = require("pdfviewer");
    </script>
    <!-- load qrcode.js -->
    <script src="node_modules/qrcode-js-package/qrcode.min.js"></script>
</head>

<body>

    <!-- Swiper -->
    <div class="swiper-container" id="slider">
        <div class="swiper-wrapper">
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div>

    <!-- load slide contents from config -->
    <script>
        var swiper_wrapper = document.getElementsByClassName("swiper-wrapper")[0];
        for (var i = 0; i < config.length; ++i) {
            var slide = document.createElement("DIV");
            slide.classList.add("swiper-slide");
            slide.innerHTML = "Slide " + i + ":<br>";
            slide.innerHTML += "<a href=\"javascript:show( " + i + " )\">Show</a><br>";
            slide.innerHTML += "<a href=\"javascript:mail( " + i + " )\">Mail</a><br>";
            slide.innerHTML += "<a href=\"javascript:print( " + i + " )\">Print</a>";
            slide.innerHTML += "<div id=\"qrcode" + i + "\"></div>";
            swiper_wrapper.appendChild(slide);
            new QRCode(
                "qrcode" + i, {
                    text: config[i].websiteUrl,
                    width: 128,
                    height: 128
                }
            );

        }
    </script>

    <div id="showPdf">
        Show PDF
        <a href="javascript:slide()">Hide</a>
        <div id="pdfViewer"></div>
    </div>

    <div id="printPdf">
        Print PDF
        <a href="javascript:slide()">Hide</a>
    </div>

    <div id="sendEmail">
        Send E-Mail
        <a href="javascript:slide()">Hide</a>
    </div>

    <!-- Initialize Swiper -->
    <script>
        $(document).ready(function() {
            //initialize swiper when document ready
            var swiper = new Swiper('.swiper-container', {
                loop: true,
                pagination: '.swiper-pagination',
                nextButton: '.swiper-button-next',
                prevButton: '.swiper-button-prev',
                paginationClickable: true,
                spaceBetween: 30,
            });
        });
    </script>

    <script>
        function slide() {
            $('body > div').hide().filter('#slider').show();
        }

        function show(which) {
            console.log(config);
            $('body > div').hide().filter('#showPdf').show();
            new PdfViewer({
                pdfUrl: config[which].pdfUrl,
                staticHost: 'node_modules/pdfviewer/dist/index.html',
                onerror: function(err) {
                    console.error('PdfViewer', err);
                }
            }).embed(document.getElementById('pdfViewer'));
        }

        function mail(which) {
            $('body > div').hide().filter('#sendEmail').show();
        }

        function print(which) {
            $('body > div').hide().filter('#printPdf').show();
        }

        slide();
    </script>
</body>

</html>
